version: '3'
services:
  caddy:
    image: caddy:2
    ports:
      - 80:80
      - 443:443
    volumes:
      - .caddy/Caddyfile:/etc/caddy/Caddyfile:ro
    networks:
      - happypath
  api:
    image: ghcr.io/gokceno/happy-path-api:latest
    env_file:
       - .api.env
    depends_on:
      - directus
    networks:
      - happypath
  directus:
    image: directus/directus:latest
    networks:
      - happypath
    env_file:
      - .directus.env
  hooks:
    image: ghcr.io/gokceno/happy-path-hooks:latest
    networks:
      - happypath
    env_file:
      - .hooks.env
  dashboard:
    image: ghcr.io/gokceno/happy-path-dashboard:latest
    networks:
      - happypath
    env_file:
      - .dashboard.env
  auth:
    image: ghcr.io/gokceno/happy-path-auth:latest
    networks:
      - happypath
networks:
  happypath:
